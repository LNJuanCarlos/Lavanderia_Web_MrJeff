CREATE DATABASE LAVANDERIAWEB;
drop database LAVANDERIAWEB;


 USE LAVANDERIAWEB;
 select * from CLIENTE;
 drop table cliente;
CREATE TABLE CLIENTE(
DNI CHAR(8)  PRIMARY KEY NOT NULL,
NOMBRES VARCHAR(50)NOT NULL,
APELLIDOS VARCHAR(50)NOT NULL,
DIRECCION VARCHAR(50)NOT NULL,
SEXO CHAR(8)NOT NULL,
EMAIL VARCHAR(50)NOT NULL,
TELEFONO CHAR(9)NOT NULL,
ID_DISTRITO CHAR(4)NOT NULL);




CREATE TABLE EMPLEADO(
DNI CHAR(8) PRIMARY KEY NOT NULL,
NOMBRES VARCHAR(50)NOT NULL,
APELLIDOS VARCHAR(50)NOT NULL,
DIRECCION VARCHAR(50)NOT NULL,
SEXO CHAR(8)NOT NULL,
EMAIL VARCHAR(50)NOT NULL,
TELEFONO CHAR(9)NOT NULL,
ID_DISTRITO CHAR(4)NOT NULL,
ID_USUARIO CHAR(4)NOT NULL,
ID_CARGO CHAR(4)NOT NULL
);
select * from pais;


drop table pais;
CREATE TABLE PAIS(
ID_PAIS CHAR(4)PRIMARY KEY NOT NULL,
NOMBRE_PAIS VARCHAR(30)NOT NULL);


drop table departamento;
select * from departamento;
CREATE TABLE DEPARTAMENTO(
ID_DEPARTAMENTO CHAR(4)  PRIMARY KEY NOT NULL,
NOMBRE_DEPARTAMENTO VARCHAR(30)NOT NULL,
ID_PAIS CHAR(4)NOT NULL);


select * from distrito;
drop table distrito;
CREATE TABLE DISTRITO(
ID_DISTRITO CHAR(4) PRIMARY KEY NOT NULL,
NOMBRE_DISTRITO VARCHAR(30)NOT NULL,
ID_DEPARTAMENTO CHAR(4)NOT NULL);


select * from Pedido;
CREATE TABLE PEDIDO(
ID_PEDIDO CHAR(4) PRIMARY KEY  NOT NULL,
FEC_PEDIDO DATE NULL);



CREATE TABLE DETALLE_PEDIDO(
ID_DETALLE_PEDIDO CHAR(4) PRIMARY KEY NOT NULL,
DESC_PEDIDO VARCHAR(50)NOT NULL,
CANTIDAD INT,
ID_PRODUCTO CHAR(4)NOT NULL);



CREATE TABLE CARGO(
ID_CARGO CHAR(4) PRIMARY KEY NOT NULL,
NOMBRE_CARGO VARCHAR(30)NOT NULL,
SUELDO INT);



CREATE TABLE PAGO(
ID_PAGO CHAR(4) PRIMARY KEY NOT NULL,
DESCRIPCION_PAGO VARCHAR(50)NOT NULL,
MONTO_TOTAL DECIMAL(5,2)NOT NULL,
TIPO_PAGO VARCHAR(50)NOT NULL,
ESTADO VARCHAR(30)NOT NULL,
DNI CHAR(8)NOT NULL,
ID_PEDIDO CHAR(4)NOT NULL,
ID_PRODUCTO CHAR(4)NOT NULL,
ID_TIPO_PAGO CHAR(4)NOT NULL);




CREATE TABLE PRODUCTO(
ID_PRODUCTO CHAR(4)  PRIMARY KEY NOT NULL,
NOMBRE_PRODUCTO VARCHAR(50)NOT NULL,
VALOR_UNITARIO INT,

ID_CATEGORIA CHAR(4) NOT NULL);




CREATE TABLE CATEGORIA(
ID_CATEGORIA CHAR(4)  PRIMARY KEY NOT NULL,
DESC_CATEGORIA VARCHAR(50)NOT NULL);



CREATE TABLE USUARIO(
ID_USUARIO CHAR(4) PRIMARY KEY NOT NULL,
NOM_USUARIO VARCHAR(50)NOT NULL,
PASSWORD VARCHAR(30)NOT NULL,
ESTADO VARCHAR(20)NOT NULL);

select * from Usuario;

select * from incidencias;
CREATE TABLE INCIDENCIAS(
ID_INCIDENCIAS CHAR(4)  PRIMARY KEY NOT NULL,
ASUNTO_INC VARCHAR(50)NOT NULL,
DESCRIPCION_INC VARCHAR(50)NOT NULL,
ESTADO_INC VARCHAR(20)NOT NULL,
FEC_INC DATE NULL,
DNI CHAR(8)NOT NULL,
ID_PEDIDO CHAR(4)NOT NULL,
ID_OPINION CHAR(4)NOT NULL,
ID_COMENTARIO CHAR(4)NOT NULL);


select * from opinion;
CREATE TABLE OPINION(
ID_OPINION CHAR(4) PRIMARY KEY NOT NULL,
PUNTUACION INT);



select * from comentario;
CREATE TABLE COMENTARIO(
ID_COMENTARIO CHAR(4) PRIMARY KEY NOT NULL,
DESCRIPCION VARCHAR(50)NOT NULL);


CREATE TABLE TIPO_PAGO(
ID_TIPO_PAGO CHAR(4)  PRIMARY KEY NOT NULL,
DESC_TIPO_PAGO VARCHAR(50)NOT NULL);



ALTER TABLE CLIENTE
ADD CONSTRAINT FK_CLIENTE_ID_DISTRITO
FOREIGN KEY(ID_DISTRITO)REFERENCES DISTRITO(ID_DISTRITO);




ALTER TABLE EMPLEADO
ADD CONSTRAINT FK_EMPLEADO_ID_DISTRITO
FOREIGN KEY(ID_DISTRITO)REFERENCES DISTRITO(ID_DISTRITO);

ALTER TABLE EMPLEADO
ADD CONSTRAINT FK_EMPLEADO_ID_USUARIO
FOREIGN KEY(ID_USUARIO)REFERENCES USUARIO(ID_USUARIO);

ALTER TABLE DEPARTAMENTO
ADD CONSTRAINT FK_DEPARTAMENTO_ID_PAIS
FOREIGN KEY(ID_PAIS)REFERENCES PAIS(ID_PAIS);

ALTER TABLE DISTRITO
ADD CONSTRAINT FK_DISTRITO_ID_DEPARTAMENTO
FOREIGN KEY(ID_DEPARTAMENTO)REFERENCES DEPARTAMENTO(ID_DEPARTAMENTO);




ALTER TABLE DETALLE_PEDIDO
ADD CONSTRAINT FK_DETALLE_PEDIDO_ID_PRODUCTO
FOREIGN KEY(ID_PRODUCTO)REFERENCES PRODUCTO(ID_PRODUCTO);


ALTER TABLE PAGO
ADD CONSTRAINT FK_PAGO_DNI
FOREIGN KEY(DNI)REFERENCES CLIENTE(DNI);

ALTER TABLE PAGO
ADD CONSTRAINT FK_PAGO_ID_PRODUCTO
FOREIGN KEY(ID_PRODUCTO)REFERENCES PRODUCTO(ID_PRODUCTO);

ALTER TABLE PAGO
ADD CONSTRAINT FK_PAGO_ID_PEDIDO
FOREIGN KEY(ID_PEDIDO)REFERENCES PEDIDO(ID_PEDIDO);

ALTER TABLE INCIDENCIAS
ADD CONSTRAINT FK_INCIDENCIAS_ID_PEDIDO
FOREIGN KEY(ID_PEDIDO)REFERENCES PEDIDO(ID_PEDIDO);

ALTER TABLE INCIDENCIAS
ADD CONSTRAINT FK_INCIDENCIAS_DNI
FOREIGN KEY(DNI)REFERENCES CLIENTE(DNI);

ALTER TABLE INCIDENCIAS
ADD CONSTRAINT FK_INCIDENCIAS_ID_OPINION
FOREIGN KEY(ID_OPINION)REFERENCES OPINION(ID_OPINION);

ALTER TABLE INCIDENCIAS
ADD CONSTRAINT FK_INCIDENCIAS_ID_COMENTARIO
FOREIGN KEY(ID_COMENTARIO)REFERENCES COMENTARIO(ID_COMENTARIO);


ALTER TABLE EMPLEADO
ADD CONSTRAINT FK_EMPLEADO_ID_CARGO
FOREIGN KEY(ID_CARGO)REFERENCES CARGO(ID_CARGO);


ALTER TABLE PRODUCTO
ADD CONSTRAINT FK_PRODUCTO_ID_CATEGORIA
FOREIGN KEY(ID_CATEGORIA)REFERENCES CATEGORIA(ID_CATEGORIA);


ALTER TABLE PAGO
ADD CONSTRAINT FK_PAGO_ID_TIPO_PAGO
FOREIGN KEY(ID_TIPO_PAGO)REFERENCES TIPO_PAGO(ID_TIPO_PAGO);

